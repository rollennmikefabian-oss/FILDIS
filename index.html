<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Central Luzon ‚Üí Nueva Ecija Interactive Map</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      text-align:center;
      background:#f4f6f8;
      margin:0;
      padding:20px;
    }

    /* === Central Luzon Map (SMALLER) === */
    #map-container{
      position:relative;
      display:inline-block;
      width: 650px;       /* üîΩ smaller map */
      max-width: 95vw;
      margin-top:12px;
      transition: filter .35s ease;
    }

    #map-image{
      width:100%;
      display:block;
      border:3px solid #333;
      border-radius:12px;
    }

    /* dots */
    .dot{
      position:absolute;
      width:26px;
      height:26px;
      border-radius:50%;
      background: rgba(255,0,0,0.75);
      border:2px solid #fff;
      cursor:pointer;
      transform: translate(-50%, -50%);
      box-shadow: 0 6px 14px rgba(0,0,0,0.25);
      z-index: 2;
    }
    .dot:hover{ background: rgba(255,0,0,1); }

    .dot-label{
      position:absolute;
      transform: translate(-50%, -50%);
      margin-top: 22px;
      padding: 4px 8px;
      font-size: 12px;
      background: rgba(255,255,255,0.9);
      border: 1px solid #333;
      border-radius: 999px;
      pointer-events:none;
      white-space: nowrap;
    }

    .blur{ filter: blur(6px); }

    /* === Province Overlay === */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(3px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:50;
    }
    .overlay.show{ display:flex; }

    .panel{
      width:min(760px, 96vw);   /* üîΩ smaller panel */
      background:#fff;
      border-radius:12px;
      padding:14px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      text-align:center;
    }

    .province-map-wrap{
      position:relative;
      width: 600px;            /* üîΩ smaller Nueva Ecija map */
      max-width: 94vw;
      margin:10px auto;
      overflow:hidden;
      border-radius:12px;
      border:2px solid #333;
    }

    #ne-map{
      width:100%;
      display:block;
      transform: scale(0.92);
      opacity:0;
      transition: transform .45s ease, opacity .25s ease;
    }
    #ne-map.zoom-in{
      transform: scale(1.1);
      opacity:1;
    }

    .closeBtn{
      padding:10px 14px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      width:220px;
      background:#222;
      color:#fff;
    }

    /* === City Modal === */
    .modal{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:60;
    }
    .modal.show{ display:flex; }

    .modal-card{
      width:400px;
      max-width:95vw;
      background:#fff;
      border-radius:12px;
      padding:16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      text-align:left;
    }

    .modal-card h3{
      margin:0 0 10px;
      text-align:center;
    }

    .modal-card button{
      width:100%;
      padding:10px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      margin-top:10px;
      background:#222;
      color:#fff;
    }

    .hint{
      margin:6px 0;
      font-size:14px;
      color:#333;
    }
  </style>
</head>

<body>
  <h2>üó∫Ô∏è Central Luzon Interactive Map</h2>
  <p>Click the dot in <b>Nueva Ecija</b> to open the province map.</p>

  <!-- CENTRAL LUZON -->
  <div id="map-container">
    <img id="map-image"
         src="https://upload.wikimedia.org/wikipedia/commons/5/55/Central_Luzon_Map.png"
         alt="Central Luzon Map">

    <div class="dot"
         style="top: 41%; left: 63%;"
         onclick="openNuevaEcija()"
         title="Nueva Ecija"></div>
    <div class="dot-label" style="top: 41%; left: 63%;">Nueva Ecija</div>
  </div>

  <!-- NUEVA ECIJA OVERLAY -->
  <div id="neOverlay" class="overlay" onclick="closeNuevaEcija()">
    <div class="panel" onclick="event.stopPropagation()">
      <h2>Nueva Ecija</h2>
      <p class="hint">Click a city dot to view information.</p>

      <div class="province-map-wrap">
        <img id="ne-map"
             src="https://www.researchgate.net/publication/321750920/figure/fig2/AS:570776814604288@1513095205148/The-map-of-the-Province-of-Nueva-Ecija-Philippines-Source-Google-Map.png"
             alt="Nueva Ecija Map">

        <div class="dot"
             style="top: 55%; left: 48%;"
             onclick="openCity(event, 'Cabanatuan City')"></div>

        <div class="dot"
             style="top: 40%; left: 55%;"
             onclick="openCity(event, 'San Jose City')"></div>

        <div class="dot"
             style="top: 70%; left: 60%;"
             onclick="openCity(event, 'Gapan City')"></div>
      </div>

      <button class="closeBtn" onclick="closeNuevaEcija()">Close Province</button>
    </div>
  </div>

  <!-- CITY MODAL -->
  <div id="cityModal" class="modal" onclick="closeCity()">
    <div class="modal-card" onclick="event.stopPropagation()">
      <h3 id="cityTitle"></h3>
      <div id="cityBody"></div>
      <button onclick="closeCity()">Close</button>
    </div>
  </div>

  <script>
    const cityInfo = {
      "Cabanatuan City": {
        dialect: "Tagalog, Ilocano",
        festival: "Banatu Festival (Feb)",
        spots: ["Plaza Lucero", "Cabanatuan POW Memorial", "Freedom Park"],
        history: "Mahalagang lungsod noong WWII at sentro ng kalakalan."
      },
      "San Jose City": {
        dialect: "Tagalog, Ilocano",
        festival: "Tanduyong Festival",
        spots: ["Public Market", "Local Parks"],
        history: "Kilalang agricultural city sa Nueva Ecija."
      },
      "Gapan City": {
        dialect: "Tagalog, Ilocano",
        festival: "Taong Putik Festival",
        spots: ["Heritage Houses", "Church Landmarks"],
        history: "Isa sa pinakamatandang lungsod sa Nueva Ecija."
      }
    };

    function openNuevaEcija(){
      document.getElementById("map-container").classList.add("blur");
      document.getElementById("neOverlay").classList.add("show");

      const neMap = document.getElementById("ne-map");
      neMap.classList.remove("zoom-in");
      void neMap.offsetWidth;
      neMap.classList.add("zoom-in");
    }

    function closeNuevaEcija(){
      document.getElementById("neOverlay").classList.remove("show");
      document.getElementById("map-container").classList.remove("blur");
      closeCity();
    }

    function openCity(e, city){
      e.stopPropagation();
      const data = cityInfo[city];
      document.getElementById("cityTitle").textContent = city;

      document.getElementById("cityBody").innerHTML = `
        <p><b>Diyalekto:</b> ${data.dialect}</p>
        <p><b>Pista:</b> ${data.festival}</p>
        <p><b>Pasyalan:</b></p>
        <ul>${data.spots.map(s => `<li>${s}</li>`).join("")}</ul>
        <p><b>Kasaysayan:</b> ${data.history}</p>
      `;

      document.getElementById("cityModal").classList.add("show");
    }

    function closeCity(){
      document.getElementById("cityModal").classList.remove("show");
    }
  </script>
</body>
</html>
